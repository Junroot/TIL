# 좋은 단위 테스트의 4대 요소

- 좋은 단위 테스트 스위트의 특성
	- 개발 주기에 통합돼 있다.
	- 코드베이스의 가장 중요한 부분만을 대상으로 한다.
	- 최소한의 유지비로 최대 가치를 끌어낸다.
- 가치있는 테스트를 작성하려면 가치있는 테스트를 식별할 수 있어야 한다.

## 좋은 단위 테스트의 4대 요소 자세히 살펴보기

- 좋은 단위 테스트 네 가지 특성
	- 회귀 방지
	- 리팩터링 내성
	- 빠른 피드백
	- 유지 보수성

### 첫 번째 요소: 회귀 방지

- 회귀: 코드를 수정한 후 기능이 의도한 대로 작동하지 않는 경우
- 회귀 방지 지표에 대한 테스트 점수가 얼마나 잘 나오는지 평가하려면 다음 사항을 고려해야 한다.
	- 테스트 중에 실행되는 코드의 양: 테스트 중에 실행되는 코드 양이 많을수록 테스트에서 회귀를 확인할 가능성이 높다.
	- 코드 복잡도: 단순한 코드는 테스트를 할 가치가 없다.
	- 코드의 도메인 유사성: 복잡한 비즈니스 로직을 나타내는 코드가 보일러 플레이트 코드보다 훨씬 더 중요하다.

### 두 번째 요소: 리팩터링 내성

- 테스트를 실패로 바꾸지 않고 기본 애플리케이션 코드를 리팩터링 할 수 있는지에 대한 척도다.
- 거짓 양성의 문제점
	- 테스트가 타당한 이유 없이 실패하면, 리팩터링에 대한 능력과 의지를 방해한다.
	- 거짓 양성이 빈번하면 테스트 스위트에 대한 신뢰가 떨어지며, 더 이상 믿을 만한 안전망으로 인식하지 않는다.

### 무엇이 거짓 양성의 원인인가?

- 테스트와 SUT의 구현 세부 사항이 많이 결합할수록 허위 경보가 더 많이 생긴다.
	- 거짓 양성이 생길 가능성을 줄이는 방법은 해당 구현 세부 사항에 테스트를 분리하는 것뿐이다.
- 테스트를 구성하기에 가장 좋은 방법은 문제 영역에 대해 이야기하는 것이다.
- SUT의 구현 세부 사항과 결합된 테스트는 리팩터링 내성이 없다.

### 구현 세부 사항 대신 최종 결과를 목표로 하기

- 테스트를 깨지지 않게 하고 리팩터링 내성을 높이는 방법은 SUT의 구현 세부 사항과 테스트 간의 결합도를 낮추는 것 뿐이다.
	- ![](assets/Pasted%20image%2020230825115739.png)