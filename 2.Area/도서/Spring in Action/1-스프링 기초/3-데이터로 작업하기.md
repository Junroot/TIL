# 데이터로 작업하기

## JDBC를 사용해서 데이터 읽고 쓰기

- 관계형 데이터를 사용할 경우 자바 개발자들이 가장 많이 사용하는 두 가지 방법은 JDBC와 JPA다.
- 스프링의 JDBC 지원은 `JdbcTemplate` 클래스에 기반을 둔다.
- `JdbcTemplate`은 JDBC를 사용할 때 요구되는 모든 형식적이고 상투적인 코드없이 개발자가 관계형 데이터베이스에 대한 SQL 연산을 수행할 수 있는 방법을 제공한다.
	- connection 생성, statement 생성
	- connection, statement, result set 닫기
	- `SQLException` 예외 처리
		- `SQLException`은 checked 예외지만 대부분의 흔한 문제들은 catch 블록에서 해결될 수 없으므로 현재 메서드를 호출한 상위 코드로 처리를 넘겨야 한다.

### JdbcTemplate 사용하기

- `JdbcTemplate`를 사용하려면 JDBC 스타터 의존성을 빌드 명세에 추가하면 된다.
- `query()`
	- 첫 번째 인자: SQL
	- 두 번째 인자: `RowMapper` 인터페이스를 구현한 함수. 이 함수는 쿼리로 생성된 모든 결과 세트의 행 개수만큼 호출되며, 결과 세트의 모든 행을 각각 객체로 생성하고 `List`에 저장후 후 반환한다.
- `queryForObject()`: `query()`와 동일하게 실행되지만, `List`를 반환하는 대신 하나의 객체만 반환한다.
	- 첫 번째 인자: SQL
	- 두 번째 인자: `RowMapper` 인터페이스를 구현한 함수.
	- 세 번째 인자: SQL에 있는 물음표 대신 교체될 값 인자
- `update()`:. 결과 세트의 데이터를 객체로 생성할 필요가 없다.

### 타코와 주문 데이터 추가하기

- `JdbcTemplate`을 사용해서 데이터를 저장하는 방법 2가지
	- 직접 `update()` 메서드를 사용한다.
	- `SimpleJdbcInsert` 래퍼 클래스를 사용한다.
- `KeyHolder` 객체는 데이터를 추가한 것의 키 값을 제공한다.
- `@SessionAttributes`: 다수의 HTTP 요청에 걸쳐서 존재해야되는 모델이 필요할 때 사용할 수 있다.
- `SessionStatus`: 세션을 재설정할 때 사용할 수 있다.
	- `sessionStatus.setComplete()`
- `Converter`: 스프링이 제공하는 인터페이스로 이를 구현해서 `@Component`로 빈등록하면 요청을 받을 때 타입을 변환해준다.

## 스프링 데이터 JPA를 사용해서 데이터 저장하고 사용하기

- 스프링 데이터 프로젝트는 여러 개의 하위 프로젝트로 구서오디는 다소 규모가 큰 프로젝트다.
- 대부분의 하위 프로젝트는 다양한 데이터베이스 유형을 사용한 데이터 퍼시스턴스에 초점을 둔다.
	- 스프링 데이터 JPA: 관계형 데이터 베이스의 JPA 퍼시스턴스
	- 스프링 데이터 MongoDB: 몽고 문서형 데이터베잏스의 퍼시스턴스
	- 스프링 데이터 Neo4: Neo4j 그래프 데이터베이스의 퍼시스턴스
	- 스프링 데이터 Redis: 레디스 키-값 스토어의 퍼시스턴스
	- 스프링 데이터 Cassandra: 카산드라 데이터베이스의 퍼시스턴스

### 스프링 데이터 JPA를 프로젝트에 추가하기

- 스프링 부터 데이터 JPA 스타터에는 JPA를 구현한 Hibernate까지도 포함되어 있다.

### 도메인 객체에 애노테이션 추가하기



4~