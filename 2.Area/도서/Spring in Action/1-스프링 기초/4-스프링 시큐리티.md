# 스프링 시큐리티

## 스프링 시큐리티 활성화하기

- 스프링 시큐리티 스타터를 프로젝트 빌드 파일에 추가만 했을 때는 다음의 보안 구성이 제공된다.
	- 모든 HTTP 요청 경로는 인증되어야 한다.
	- 어던 특정 역할이나 권한이 없다.
	- 로그인 페이지가 따로 없다.
	- 스프링 시큐리티의 HTTP 기본 인증을 사용해서 인증된다.
	- 사용자는 하나만 있으며, 이름은 user다. 비밀번호는 암호화해 로그에 남는다.

## 스프링 시큐리티 구성하기

- 스프링 시큐리티 configuration

```kotlin
@EnableWebSecurity  
class SecurityConfig {  
  
   @Bean  
   fun filterChain(http: HttpSecurity): SecurityFilterChain {  
      http.authorizeRequests()  
         .antMatchers("/design", "orders")  
         .access("hasRole('ROLE_USER')")  
         .antMatchers("/", "/**").access("permitAll")  
         .and()  
         .httpBasic()  
      return http.build()  
   }  
  
   @Bean  
   fun userDetailService(): UserDetailsService {  
      val user1 = User.builder()  
         .username("user1")  
         .password("{noop}password1")  
         .authorities("ROLE_USER")  
         .build()  
      val user2 = User.builder()  
         .username("user2")  
         .password("{noop}password2")  
         .authorities("ROLE_USER")  
         .build()  
      return InMemoryUserDetailsManager(user1, user2)  
   }  
}
```

- 스프링 시큐리티에서는 여러 가지의 사용자 스토어 구성 방법을 제공한다.
	- 인메모리 사용자 스토어
	- JDBC 기반 사용자 스토어
	- LDAP 기반 사용자 스토어
	- 커스텀 사용자 명세 서비스
- `UserDetailsService`: 사용자 명세를 가져오는 인터페이스
	- `InMemoryUserDetailsManager`: 인메모리 사용자 스토어
- `SecurityFilterChain`: HTTP 요청에 매칭 시킬 수 있는 필터 체인을 정의한다.
- `HttpSecurity`: HTTP 요청에 대한 웹 기반 보안을 구성할 수 있다.
