# 스프링 시작하기

## 스프링이란?

- 스프링 애플리케이션 컨텍스트(Spring application context): 애플리케이션 컴포넌트들을 생성하고 관리하는 컨테이너.
	- 
- 빈(bean): 스프링에서 관리하는 애플리케이션 컴포넌트
- 빈의 상호 연결은 Depedency Injection이라고 알려진 패턴을 기반으로 수행된다.
- 스프링 애플리케이션 컨텍스트가 빈의 생성과 관리를 자체적으로 해주며, 모든 빈을 생성, 관리하고 빈을 필요로 하는 다른 빈을 주입한다.

![](Pasted%20image%2020230306221841.png)

- 지금까지의 스프링 버전에서는 XML 파일을 사용해서 빈을 상호 연결하도록 스프링 애플리케이션 컨텍스트에 알려줬다.
- 최신 버전에서는 자바 기반의 configuration이 더 많이 사용된다.
- `@Configuration`은 이것이 각 빈을 스프링 애플리케이션 컨텍스트에 제공하는 구성 클래스라는 것을 스프링에게 알려준다.
- 구성 클래스의 메서드에는 `@Bean`이 지정되어 있으며, 이것은 각 메서드에서 반환되는 객체가 애플리케이션 컨텍스트의 빈으로 추가되어야 한다는 것을 나타낸다.

```kotlin
@Configuration  
class ServiceConfiguration {  
  
   @Bean  
   fun inventoryService(): InventoryService {  
      return InventoryService()  
   }  
     
   @Bean  
   fun productService(): ProductService {  
      return ProductService(inventoryService())  
   }  
}
```

- 스프링은 자동으로 컴포넌트를 구성할 수 있는 자동-구성 기능이 있어서 별도의 XML 구성이나 자바 구성이 없어도 된다.
- 자동-구성은 autowiring(자동 연결)과 component scanning(컴포넌트 검색)이라는 스프링 기법을 기반으로 한다.
	- component scanning을 사용하여 스프링은 자동으로 애플리케이션의 classpath에 지정된 컴포넌트를 찾은 후 스프링 애플리케이션 컨텍스트의 빈으로 생성할 수 있다.
	- 자동 연결을 사용하여 의존 관계가 있는 컴포넌트를 자동으로 다른 빈에 주입한다.
- Spring Boot는 자동-구성 기능이 더욱 향상되었다.
	- 스프링 부트의 자동-구성은 애플리케이션을 빌드하는 데 필요한 별도의 구성 코드(XML이나 자바)를 현격히 줄여준다.

## 스프링 애플리케이션 초기 설정하기

### 스프링 프로젝트 구조 살펴보기

- `mvnw`/`mvnw.cmd`: 메이븐 래퍼 스크립트. 메이븐이 각자 컴퓨터에 설치되어 있지 않더라도 이 스크립트를 사용하여 프로젝트를 빌드할 수 있다.
- `pom.xml`: 메이븐 빌드 명세를 지정한 파일
- `application.properties`: 구성 속성을 지정할 수 있다.
- `static`: 브라우저에 제공할 정적인 콘텐츠를 둘 수 있는 폴더
- `templates`: 브라우저에 콘텐츠를 보여주는 템플릿 파일을 두는 폴더
- 빌드 명세
	- `<parent>`: 우리 프로젝트가 부모 POM(project object model)으로 spring-boot-start-parent를 갖는다.
	- `<dependencies>`: 의존성을 정의한다.
	- `<plugins>`: 플러그인을 지정한다.
- 스타터 의존성의 장점
	- 우리가 필요로 하는 모든 라이브러리 의존성을 선언하지 않아도 되므로 빌드 파일이 훨씬 더 작아지고 관리하기 쉬워진다.
	- 라이브러리 이름이 아닌 기능 관점으로 의존성을 생각할 수 있다.
	- 라이브러리드릐 버전을 걱정하지 않아도 된다.
- 플로그인의 중요 기능
	- 메이븐을 사용하는 애플리케이션을 실행할 수 있게 해준다.
	- 의존성에 지정된 모든 라이브러리가 실행 가능 JAR 파일에 포함되어 있는지 그리고 런타임 시에 classpath에서 찾을 수 있는지 확인한다.
	- 실행 가능 JAR 파일의 메인 클래스로 부트스트랩 클래스를 나타내는 매니페스트 파일을 JAR 파일에 생성한다.
- `@SpringBootApplication`은 다음 세 개의 애노테이션을 결합한 것이다.
	- `@SpringBootConfiguration`: 현재 클래스를 구성 클래스로 지정한다. `@Configuration` 의 특화된 형태다.
	- `@EnableAutoConfiguration`: 스프링 부트 자동-구성을 활성화한다.
	- `@ComponentScan`: 컴포넌트 검색을 활성화한다. `@Component`, `@Controller`, `@Service` 등의 애노테이션과 함께 클래스를 선언하면 자동으로 찾아서 스프링 애플리케이션 컨텍스트에 컴포넌트로 등록한다.
- `run()` 메서드에 전달되는 두 매개변수는 구성 클래스와 명령행 인자다.
	- kotlin의 경우는 명령행 인자만 전달된다.

```kotlin
@SpringBootApplication  
class StudyApplication  
  
fun main(args: Array<String>) {  
   runApplication<StudyApplication>(*args)  
}
```

- `@SpringBootTest`
	- 스프링 부트 기능으로 테스트를 시작하라는 것을 JUnit에 알려준다.
	- 스프링 애플리케이션 컨텍스트를 로드하는 작업을 수행한다. 
	- 하지만 테스트 메서드가 없으면 로드하지 않는다. 빈 테스트 메서드라도 있으면 로드를 진행한다.



1-3~