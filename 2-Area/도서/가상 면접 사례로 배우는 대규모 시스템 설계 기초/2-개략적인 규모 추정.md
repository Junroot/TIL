# 개략적인 규모 추정

## 2의 제곱수

![](assets/Pasted%20image%2020240311223033.png)

## 모든 프로그래머가 알아야 하는 응답지연 값

- 메모리는 빠르지만 디스크는 아직도 느리다.
- 디스크 탐색은 가능한 피하라.
- 단순한 압축 알고리즘은 빠르다.
- 데이터를 인터넷으로 전송하기 전에 가능하면 압축하라.
- 데이터 센터는 보통 여러 지역에 분산되어 있고, 센터들 간에 데이터를 주고받는 데는 시간이 걸린다.

![](assets/Pasted%20image%2020240311223141.png)


## 가용성에 관계된 수치들

- 고가용성(high availability): 시스템이 오랜 시간 동안 지속적으로 중단 없이 운영될 수 있는 능력
- 100%는 시스템이 단 한 번도 중단된 적이 없었음을 의미한다.
- 대부분의 서비스는 99%에서 100%사이의 값을 갖는다.

![](assets/Pasted%20image%2020240311223540.png)

## 예제: 트위터 QPS와 저장소 요구량 추정

- 가정
	- 월간 능동 사용자: 3억명
	- 50%의 사용자가 트위터를 매일 사용한다.
	- 평균적으로 각 사용자는 매일 2건의 트윗을 올린다.
	- 미디어를 포함하는 트윗은 10%정도다.
	- 데이터는 5년간 보관된다.
- 추정
	- 일간 능동 사용자: 3억 \* 50% = 1.5억
	- QPS = 1.5억 \* 2 트윗 / 24시간 / 3600초 = 약 3500
	- 최대 QPS = 2 \* QPS = 약 7000
- 미디어 저장을 위한 저장소 요구량
	- 평균 트윗 크기
		- tweet_id 에 64바이트
		- 텍스트에 140바이트
		- 미디어에 1MB
	- 미디어 저장소 요구량: 1.5억 \* 2 \* 10% \* 1 MB = 30TB / 일
	- 5년간 미디어를 보관하기 위한 저장소 요구량: 30YB \* 365 \* 5 = 약 55PB

## 팁

- 근사치를 활용한 계산(rounding and approximation): 면접장에서 복잡한 계산을 하는 것은 어려운 일이다.
	- 99987/9.1은 100000/10으로 근사해서 계산할 수 있다.
- 가정들을 적어 두라. 나중에 살펴볼 수 있도록.
- 단위(unit)을 붙이라. 5라고만 적으면 5KB인지 5MB인지 알 수가 없다.
- 많이 출제되는 개략적 규모 추정 문제는 QPS, 최대 QPS, 저장 요구량, 캐시 요규량, 서버 수 등을 추정하는 것이다.
