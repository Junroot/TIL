# 인덱스와 인덱싱

## 성능 향상과 관련 없는 딴짓

- 레드헤링(Red Herring): 목표로부터 주의를 딴 데로 돌리는 상황
- MySQL 성능을 향상하기 위한 방법을 찾을 때 일반적으로 두 가지 레드헤링이 있다.
	- 하드웨어를 구매하는 것
	- MySQL 튜닝

### 더 좋고 빠른 하드웨어!

- MySQL 성능이 만족스럽지 않을 때 성능 향상에 도움이 되는지 확인하기 위해 스케일업부터 시작하지 말라.
- 이 경우가 합리적인 2가지 상황
	- 하드웨어 성능 부족으로 명백하게 느린 경우
		- 예) 500GB의 데이터에 1GB의 메모리를 사용하는 경우
	- 애플리케이션의 사용량이 급증하고 있으며, 하드웨어 스케일업이 애플리케이션 실행에 있어 안정성을 담보하기 위한 임시 방편인 경우
- 단순 스케일업은 아무것도 배우지 못하며, 고사양의 하드웨어 구매로 문제를 대강 뭉개는 데 익숙해질 것이다.
- 하드웨어 확장은 지속 가능한 접근 방법이 아니다.
	- 물리적인 하드웨어 업그레이드는 간단하지 않다.
	- 스케일업에 따라 더 커다란 비용을 지불해야 한다.

### MySQL 튜닝

- 튜닝: 연구개발을 목적으로 MySQL 시스템 변수를 조정하는 행위로 구체적인 목표와 기준이 있는 실험실 수준의 작업
- 구성: 시스템 변수를 하드웨어와 환경에 적합한 값으로 설정하는 행위로 목표는 변경해야 하는 몇 가지 기본값을 가장 적합한 값으로 구성하는 것
	- 단위가 달라질 정도로 데이터 규모가 대량으로 증가했을 때 재구성이 필요하다.
- 최적화: 워크로드를 줄이거나 효율성을 높여 MySQL 성능을 향상시키는 행위
- 튜닝이 헤드헤링인 이유
	- MySQL 성능은 복잡하므로 튜닝 결과가 의심될 수 있다.
	- MySQL은 이미 고도로 최적화 되었으므로 튜닝의 결과는 기대보다 성능에 큰 영향을 미치지 않는다.
- 재구성이 무의미한 이유
	- MySQL 8.0에서는 `innodb_dedicated_server` 매개변수를 활성화하여 자동으로 서버를 구성한다. 직접 재구성이 무의미하다.
